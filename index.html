<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MyMovies - Coleção</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* === SEU CSS AQUI (mantive igual ao seu) === */
</style>
</head>
<body>
<div class="app">
  <!-- === TELAS DE LOGIN E APP (igual ao seu) === -->
</div>

<!-- Firebase modular SDK -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js";
  import { getFirestore, collection, query, where, onSnapshot, addDoc, doc, updateDoc, deleteDoc, serverTimestamp, enableIndexedDbPersistence } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBu6FyItXddK1pghqaEURKaMiQTMQZlJks",
    authDomain: "colecaodefilmes-dfa7a.firebaseapp.com",
    projectId: "colecaodefilmes-dfa7a",
    storageBucket: "colecaodefilmes-dfa7a.appspot.com",
    messagingSenderId: "495818238503",
    appId: "1:495818238503:web:814178c233d5fb304a7c02"
  };
  const OMDB_API_KEY = "6cbfb854";

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  try { await enableIndexedDbPersistence(db) } catch(e){ console.warn('Sem IndexedDB:', e.message) }

  /* === TODO SEU CÓDIGO JS DE LOGIN, ADD, RENDER, ETC (igual ao que você colou) === */

  // helper para mensagens
  function showMsg(text, type='success') {
    console.log('MSG:', text);
    const prev = document.querySelector('.__quick_msg');
    if (prev) prev.remove();
    const el = document.createElement('div');
    el.className = '__quick_msg container-card';
    el.style.position = 'fixed';
    el.style.right = '12px';
    el.style.bottom = '12px';
    el.style.zIndex = 9999;
    el.style.padding = '10px 14px';
    el.style.background = type === 'success'
      ? 'rgba(16,185,129,0.2)'
      : 'rgba(239,68,68,0.2)';
    el.style.color = '#fff';
    el.textContent = text;
    document.body.appendChild(el);
    setTimeout(()=>el.remove(), 3000);
  }

  // função auxiliar para evitar XSS em inputs editáveis
  function escapeHtml(str="") {
    return str.replace(/[&<>'"]/g, t => ({
      "&":"&amp;", "<":"&lt;", ">":"&gt;", "'":"&#39;", '"':"&quot;"
    }[t]));
  }
</script>
</body>
</html>